generator client {
  provider = "prisma-client"
  output   = "../app/generated/prisma"
}

datasource db {
  provider = "postgresql"
}



model Hotel {
  id              Int       @id @default(autoincrement())
  title           String
  desc            String
  title_fr        String
  desc_fr         String
  address         String
  city            String
  country         String
  price_per_night Float
  total_price     Float?
  currency        String
  rating          Float?
  review_count    Int?
  amenities       Json
  check_in        String
  check_out       String
  notes           String?
  images          String[]
  coupons         Coupon[]
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt
}

model Flight {
  id              Int       @id @default(autoincrement())
  title           String
  description     String
  airline         String
  departureCity   String
  arrivalCity     String
  duration        String
  price           Float
  currency        String    @default("EUR")
  flightClass     String
  baggage         String
  services        Json
  whyAdore        Json
  flexibleDates   Boolean   @default(false)
  extras          Json?
  tips            Json?
  offerLink       String?
  images          String[]
  coupons         Coupon[]
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt
}

model Rental {
  id                Int       @id @default(autoincrement())
  category          String
  title             String
  description       String?
  mainHeading       String
  mainDescription   String
  offer             Json
  whySuperDeal      String
  thingsToDo        Json
  additionalInfo    Json
  ecoTip            String?
  images            String[]
  coupons           Coupon[]
  createdAt         DateTime  @default(now())
  updatedAt         DateTime  @updatedAt
}

model Blog {
  id              Int      @id @default(autoincrement())
  title           String
  slug            String   @unique
  content         String
  excerpt         String?
  mainImage       String?
  images          String[]
  author          String   @default("Admin")
  category        String?  @default("Travel")
  tags            Json?
  published       Boolean  @default(false)
  featured        Boolean  @default(false)
  
  metaTitle       String?
  metaDescription String?
  
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
}

model Coupon {
  id                Int       @id @default(autoincrement())
  code              String    @unique
  name              String
  description       String?
  discountValue     Float
  maxUses           Int?
  currentUses       Int       @default(0)
  validFrom         DateTime
  validUntil        DateTime
  isActive          Boolean   @default(true)
  isShowcased       Boolean   @default(false)
  flightIds         Int[]     @default([])
  flights           Flight[]
  hotelIds          Int[]     @default([])
  hotels            Hotel[]
  rentalIds         Int[]     @default([])
  rentals           Rental[]
  brandId           Int?
  brand             Brand?    @relation(fields: [brandId], references: [id])
  createdAt         DateTime  @default(now())
  updatedAt         DateTime  @updatedAt
}

model Brand {
  id              Int       @id @default(autoincrement())
  name            String    @unique
  websiteLink     String?
  images          String[]
  description     String?
  coupons         Coupon[]
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt
}

model Category {
  id          Int              @id @default(autoincrement())
  name        String           @unique
  slug        String           @unique
  description String?
  products    DynamicProduct[]
  createdAt   DateTime         @default(now())
  updatedAt   DateTime         @updatedAt
}

model DynamicProduct {
  id          Int      @id @default(autoincrement())
  title       String
  description String?
  price       Float
  currency    String   @default("EUR")
  images      String[]
  details     Json? // Flexible field for category-specific attributes
  categoryId  Int
  category    Category @relation(fields: [categoryId], references: [id])
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}
